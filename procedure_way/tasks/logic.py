""" 4) Логические задачи"""

import random

def generate_logic(diff):
    """
    Генерирует задачу по решению задач темы 4) Логические задачи

    При diff == 1 - базовые логические операции И, ИЛИ с заданными значениями
    При diff == 2 - задачи на определение след числа в арифметической прогрессии
    При diff == 3 - задачи на логический вывод

    Для каждой сгенерированной задачи: текст вопроса, правильный ответ, подсказка и объяснение.
    """
    if diff == 1:
        task_type = random.choice(["and", "or"])
        if task_type == "and":
            question = (
                "Утверждение A — ложное. Утверждение B — истинное.\n"
                "Каково значение логического выражения A и B (A ∧ B)?"
            )
            answer = False
            hint = "Конъюнкция (И) истинна только тогда, когда все утверждения истинны."
            explanation = (
                "Конъюнкция (A и B) — истина только если оба утверждения истинны.\n"
                "Так как A — ложное, выражение A ∧ B = ложь."
            )
        else:
            question = (
                "Утверждение A — ложное. Утверждение B — истинное.\n"
                "Каково значение логического выражения A или B (A ∨ B)?"
            )
            answer = True
            hint = "Дизъюнкция (ИЛИ) истинна, если хотя бы одно из утверждений истинно."
            explanation = (
                "Дизъюнкция (A или B) — истина, если хотя бы одно утверждение истинно.\n"
                "B — истина, значит выражение A ∨ B = истина.")

    elif diff == 2:
        a = random.randint(1, 10)
        d = random.randint(1, 5)
        seq = [a + d * i for i in range(5)]
        answer = seq[-1] + d
        question = f"Найдите следующее число в арифметической прогрессии: {seq}"
        hint = "Определите разность между соседними числами."
        explanation = (
            f"Это арифметическая прогрессия с шагом (разностью) {d}. "
            f"Последнее число в последовательности {seq[-1]}, поэтому следующее число {seq[-1]} + {d} = {answer}.")

    else:
        question = (
            "Пусть A: 'Я учусь в университете'.\n"
            "B: 'Я сдаю экзамены'.\n"
            "C: 'Я волнуюсь'.\n\n"
            "Известно:\n"
            "- Если я учусь в университете, то я сдаю экзамены. (A → B)\n"
            "- Если я сдаю экзамены, то я волнуюсь. (B → C)\n"
            "- Я не волнуюсь. (¬C)\n\n"
            "Сделайте логический вывод: учусь ли я в университете? (Ответьте 'да' или 'нет')")
        answer = False
        hint = "Используйте правило отрицание отрицанием: если P → Q и ¬Q, то ¬P."
        explanation = (
            "Из B → C и ¬C по правилу Отрицание Отрицанием следует ¬B (я не сдаю экзамены).\n"
            "Затем из A → B и ¬B снова по Отрицанию Отрицанием следует ¬A (я не учусь в университете).\n"
            "Следовательно, ответ: нет.")
    return {'text': question, 'answer': answer, 'hint': hint, 'explanation': explanation, 'params': {}}


